{"ast":null,"code":"var _jsxFileName = \"D:\\\\Hoc Tap BKHN\\\\2023-1\\\\IoT-Project\\\\Frontend_IOT\\\\src\\\\layout\\\\components\\\\NavTop\\\\NavUser.js\",\n  _s = $RefreshSig$();\nimport _styled from \"@emotion/styled\";\nimport { motion } from 'framer-motion';\nimport React, { useCallback, useState } from 'react';\nimport { LogOut, User } from 'react-feather';\nimport { useNavigate } from 'react-router';\nimport avatarDefault from '../../../assets/avatar_default.png';\nimport DarkMode from '../../../ModeScreen/DarkMode';\nimport './style.css';\nimport useAuthen from '../../../hooks/useAuthen';\nimport { getUserInfo, logoutUser } from '../../../services/authenService';\nimport { useCookies } from 'react-cookie';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RightNavBar = _styled.div({\n  \"display\": \"flex\",\n  \"alignItems\": \"center\",\n  \"marginLeft\": \"auto\"\n});\n_c = RightNavBar;\nconst UserContainer = _styled.div`\n  ${[`height:78px;`, {\n  \"display\": \"none\",\n  \"alignItems\": \"center\",\n  \"cursor\": \"pointer\",\n  \"position\": \"relative\",\n  \"@media (min-width: 640px)\": {\n    \"display\": \"flex\"\n  }\n}]}\n`;\n_c2 = UserContainer;\nconst Avatar = _styled.img({\n  \"height\": \"3rem\",\n  \"width\": \"3rem\",\n  \"borderRadius\": \"9999px\",\n  \":hover\": {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(144, 205, 244, var(--tw-bg-opacity))\"\n  },\n  \"objectFit\": \"cover\",\n  \"marginLeft\": \"0.75rem\"\n});\n_c3 = Avatar;\nconst NameUser = _styled.div`\n    ${`max-width:11.5rem;`}\n    ${{\n  \"fontSize\": \"1.125rem\",\n  \"fontWeight\": \"700\",\n  \"marginLeft\": \"1rem\",\n  \"marginRight\": \"1rem\",\n  \"overflow\": \"hidden\",\n  \"textOverflow\": \"ellipsis\",\n  \"whiteSpace\": \"nowrap\"\n}}\n`;\n_c4 = NameUser;\nconst Span = _styled.span({\n  \"marginLeft\": \"0.75rem\"\n});\n_c5 = Span;\nconst Dropdown = _styled(motion.div)(() => [{\n  \"height\": \"auto\",\n  \"width\": \"12rem\",\n  \"borderTopWidth\": \"1px\",\n  \"--tw-border-opacity\": \"1\",\n  \"borderColor\": \"rgba(99, 179, 237, var(--tw-border-opacity))\",\n  \"--tw-shadow\": \"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)\",\n  \"boxShadow\": \"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)\",\n  \"marginTop\": \"1rem\",\n  \"position\": \"absolute\",\n  \"display\": \"flex\",\n  \"flexDirection\": \"column\"\n}]);\nconst DropdownItem = _styled.div({\n  \"transform\": \"var(--tw-transform)\",\n  \"width\": \"100%\",\n  \"display\": \"flex\",\n  \"padding\": \"0.5rem\",\n  \"cursor\": \"pointer\",\n  \"marginTop\": \"0.25rem\",\n  \"marginBottom\": \"0.25rem\",\n  \"fontSize\": \"1.125rem\",\n  \"fontWeight\": \"500\",\n  \"borderBottomWidth\": \"1px\",\n  \"transitionProperty\": \"all\",\n  \"transitionDuration\": \"75ms\",\n  \":hover\": {\n    \"--tw-text-opacity\": \"1\",\n    \"color\": \"rgba(99, 179, 237, var(--tw-text-opacity))\",\n    \"fontSize\": \"1.25rem\"\n  }\n});\n_c6 = DropdownItem;\nconst NavUser = () => {\n  _s();\n  const [isOpen, setIsOpen] = useState(false);\n  const [avatar, setAvatar] = useState(null);\n  const history = useNavigate();\n  const {\n    username,\n    isAuthenticated,\n    setIsAuthenticated\n  } = useAuthen();\n  const [cookies, setCookie, removeCookie] = useCookies([\"currentuser\"]);\n  const navigate = useNavigate();\n  const UserOptions = [{\n    id: 'profile',\n    name: \"Infomation\",\n    link: \"/user-profile\",\n    display: true,\n    icon: /*#__PURE__*/_jsxDEV(User, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 86\n    }, this)\n  },\n  // { id: 'change_password', name: \"Đổi mật khẩu\", link: \"/change-password\", display: (idp === \"local\") ? true : false, icon: <Key /> },\n  {\n    id: 'logout',\n    name: \"Logout\",\n    link: \"\",\n    display: true,\n    icon: /*#__PURE__*/_jsxDEV(LogOut, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 68\n    }, this)\n  }];\n  const handleMouseMove = useCallback(isOpen => {\n    setIsOpen(isOpen);\n  }, []);\n  const handleItemClick = async _ref => {\n    let {\n      id,\n      link\n    } = _ref;\n    if (id === 'logout') {\n      await logoutUser();\n      removeCookie(\"currentuser\");\n      removeCookie(\"userid\");\n      const res = await getUserInfo();\n      console.log('res', res);\n      console.log('window.location.pathname', window.location.pathname);\n      if (window.location.pathname === '/') {\n        console.log('first');\n        window.location.reload();\n      } else {\n        console.log('isAuthenticated', isAuthenticated);\n        setIsAuthenticated(false);\n        navigate('/');\n        window.location.reload();\n      }\n    } else link && history(link);\n  };\n  return /*#__PURE__*/_jsxDEV(RightNavBar, {\n    children: [/*#__PURE__*/_jsxDEV(UserContainer, {\n      className: \"group\",\n      onMouseMove: () => handleMouseMove(true),\n      onMouseLeave: () => handleMouseMove(false),\n      children: [/*#__PURE__*/_jsxDEV(Avatar, {\n        src: avatar ? avatar : avatarDefault,\n        alt: \"avatar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NameUser, {\n        children: username || \"User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Dropdown, {\n        className: \"bg-memu-bar\",\n        variants: {\n          current: {\n            opacity: 1,\n            y: 79,\n            display: \"\"\n          },\n          hidden: {\n            opacity: 0,\n            y: 135,\n            display: \"none\"\n          }\n        },\n        transition: {\n          duration: 0.2\n        },\n        initial: 'hidden',\n        animate: isOpen ? 'current' : 'hidden',\n        children: UserOptions.map(_ref2 => {\n          let {\n            id,\n            link,\n            name,\n            display,\n            icon\n          } = _ref2;\n          return display && /*#__PURE__*/_jsxDEV(DropdownItem, {\n            onClick: () => handleItemClick({\n              id,\n              link\n            }),\n            children: [icon, /*#__PURE__*/_jsxDEV(Span, {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 24\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 7\n    }, this), \"\\xA0\\xA0\", /*#__PURE__*/_jsxDEV(DarkMode, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 5\n  }, this);\n};\n_s(NavUser, \"sCvaTW/L0AXU8SK+lMVjGin4lLM=\", false, function () {\n  return [useNavigate, useAuthen, useCookies, useNavigate];\n});\n_c7 = NavUser;\nexport default NavUser;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"RightNavBar\");\n$RefreshReg$(_c2, \"UserContainer\");\n$RefreshReg$(_c3, \"Avatar\");\n$RefreshReg$(_c4, \"NameUser\");\n$RefreshReg$(_c5, \"Span\");\n$RefreshReg$(_c6, \"DropdownItem\");\n$RefreshReg$(_c7, \"NavUser\");","map":{"version":3,"names":["motion","React","useCallback","useState","LogOut","User","useNavigate","avatarDefault","DarkMode","useAuthen","getUserInfo","logoutUser","useCookies","RightNavBar","tw","div","UserContainer","styled","Avatar","img","NameUser","Span","span","Dropdown","DropdownItem","NavUser","isOpen","setIsOpen","avatar","setAvatar","history","username","isAuthenticated","setIsAuthenticated","cookies","setCookie","removeCookie","navigate","UserOptions","id","name","link","display","icon","handleMouseMove","handleItemClick","res","console","log","window","location","pathname","reload","current","opacity","y","hidden","duration","map"],"sources":["D:/Hoc Tap BKHN/2023-1/IoT-Project/Frontend_IOT/src/layout/components/NavTop/NavUser.js"],"sourcesContent":["import { motion } from 'framer-motion';\r\nimport React, { useCallback, useState } from 'react';\r\nimport { LogOut, User } from 'react-feather';\r\nimport { useNavigate } from 'react-router';\r\nimport tw, { styled } from 'twin.macro';\r\nimport avatarDefault from '../../../assets/avatar_default.png';\r\nimport DarkMode from '../../../ModeScreen/DarkMode';\r\nimport './style.css'\r\nimport useAuthen from '../../../hooks/useAuthen'\r\nimport { getUserInfo, logoutUser } from '../../../services/authenService';\r\nimport { useCookies } from 'react-cookie';\r\nconst RightNavBar = tw.div`flex items-center ml-auto`\r\nconst UserContainer = styled.div`\r\n  ${[`height:78px;`, tw`hidden items-center cursor-pointer sm:flex relative `]}\r\n`\r\nconst Avatar = tw.img`h-12 w-12 rounded-full hover:bg-blue-300 object-cover ml-3`\r\nconst NameUser = styled.div`\r\n    ${`max-width:11.5rem;`}\r\n    ${tw`text-lg font-bold mx-4 truncate`}\r\n`\r\nconst Span = tw.span`ml-3`\r\nconst Dropdown = styled(motion.div)(() => [\r\n  tw`h-auto w-48 border-t-default border-blue-400 shadow-md mt-4 absolute flex flex-col`,\r\n])\r\nconst DropdownItem = tw.div`w-full flex p-2 cursor-pointer my-1 text-lg font-medium border-b-default transform transition-all duration-75 hover:(text-blue-400 text-xl)`\r\n\r\nconst NavUser = () => {\r\n  const [isOpen, setIsOpen] = useState(false)\r\n  const [avatar, setAvatar] = useState(null);\r\n  const history = useNavigate()\r\n  const { username, isAuthenticated, setIsAuthenticated } = useAuthen()\r\n  const [cookies, setCookie, removeCookie] = useCookies([\"currentuser\"]);\r\n  const navigate = useNavigate()\r\n\r\n  const UserOptions = [\r\n    { id: 'profile', name: \"Infomation\", link: \"/user-profile\", display: true, icon: <User /> },\r\n    // { id: 'change_password', name: \"Đổi mật khẩu\", link: \"/change-password\", display: (idp === \"local\") ? true : false, icon: <Key /> },\r\n    { id: 'logout', name: \"Logout\", link: \"\", display: true, icon: <LogOut /> }\r\n  ];\r\n\r\n  const handleMouseMove = useCallback((isOpen) => {\r\n    setIsOpen(isOpen)\r\n  }, [])\r\n\r\n  const handleItemClick = async ({ id, link }) => {\r\n    if (id === 'logout') {\r\n      await logoutUser()\r\n      removeCookie(\"currentuser\")\r\n      removeCookie(\"userid\")\r\n      const res = await getUserInfo()\r\n      console.log('res', res);\r\n\r\n      console.log('window.location.pathname', window.location.pathname);\r\n      if (window.location.pathname === '/') {\r\n        console.log('first');\r\n        window.location.reload()\r\n      }\r\n\r\n      else \r\n      {\r\n        console.log('isAuthenticated', isAuthenticated);\r\n        setIsAuthenticated(false)\r\n        navigate('/')\r\n        window.location.reload()\r\n      }\r\n        \r\n    }\r\n    else\r\n      link && history(link);\r\n  }\r\n\r\n  return (\r\n    <RightNavBar>\r\n      <UserContainer className=\"group\" onMouseMove={() => handleMouseMove(true)} onMouseLeave={() => handleMouseMove(false)}>\r\n        <Avatar src={avatar ? avatar : avatarDefault} alt=\"avatar\" />\r\n        <NameUser>{username || \"User\"}</NameUser>\r\n        <Dropdown\r\n          className=\"bg-memu-bar\"\r\n          variants={{\r\n            current: {\r\n              opacity: 1,\r\n              y: 79,\r\n              display: \"\",\r\n            },\r\n            hidden: {\r\n              opacity: 0,\r\n              y: 135,\r\n              display: \"none\",\r\n            },\r\n          }}\r\n          transition={{ duration: 0.2 }}\r\n          initial={'hidden'}\r\n          animate={isOpen ? 'current' : 'hidden'}\r\n        >\r\n          {UserOptions.map(({ id, link, name, display, icon }) =>\r\n            display && <DropdownItem\r\n              key={id}\r\n              onClick={() => handleItemClick({ id, link })}>\r\n              {icon}\r\n              <Span>{name}</Span>\r\n            </DropdownItem>\r\n          )}\r\n        </Dropdown>\r\n      </UserContainer>&nbsp;&nbsp;\r\n      <DarkMode />\r\n    </RightNavBar>\r\n  )\r\n}\r\nexport default NavUser\r\n"],"mappings":";;;AAAA,SAASA,MAAM,QAAQ,eAAe;AACtC,OAAOC,KAAK,IAAIC,WAAW,EAAEC,QAAQ,QAAQ,OAAO;AACpD,SAASC,MAAM,EAAEC,IAAI,QAAQ,eAAe;AAC5C,SAASC,WAAW,QAAQ,cAAc;AAE1C,OAAOC,aAAa,MAAM,oCAAoC;AAC9D,OAAOC,QAAQ,MAAM,8BAA8B;AACnD,OAAO,aAAa;AACpB,OAAOC,SAAS,MAAM,0BAA0B;AAChD,SAASC,WAAW,EAAEC,UAAU,QAAQ,iCAAiC;AACzE,SAASC,UAAU,QAAQ,cAAc;AAAC;AAC1C,MAAMC,WAAW,GAAGC,OAAE,CAACC,GAAG;EAAA;EAAA;EAAA;AAA0B,CAAC;AAAA,KAA/CF,WAAW;AACjB,MAAMG,aAAa,GAAGC,OAAM,CAACF,GAAI;AACjC,IAAI,CAAE,cAAa,EAAI;EAAA;EAAA;EAAA;EAAA;EAAA;IAAA;EAAA;AAAqD,CAAC,CAAE;AAC/E,CAAC;AAAA,MAFKC,aAAa;AAGnB,MAAME,MAAM,GAAGJ,OAAE,CAACK,GAAG;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;EAAA;EAAA;EAAA;AAA2D,CAAC;AAAA,MAA3ED,MAAM;AACZ,MAAME,QAAQ,GAAGH,OAAM,CAACF,GAAI;AAC5B,MAAO,oBAAoB;AAC3B,MAAQ;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;AAAgC,CAAE;AAC1C,CAAC;AAAA,MAHKK,QAAQ;AAId,MAAMC,IAAI,GAAGP,OAAE,CAACQ,IAAI;EAAA;AAAK,CAAC;AAAA,MAApBD,IAAI;AACV,MAAME,QAAQ,GAAGN,OAAM,CAACjB,MAAM,CAACe,GAAG,CAAC,CAAC,MAAM,CACtC;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;AAAmF,CAAC,CACvF,CAAC;AACF,MAAMS,YAAY,GAAGV,OAAE,CAACC,GAAG;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;EAAA;IAAA;IAAA;IAAA;EAAA;AAA4I,CAAC;AAAA,MAAlKS,YAAY;AAElB,MAAMC,OAAO,GAAG,MAAM;EAAA;EACpB,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGxB,QAAQ,CAAC,KAAK,CAAC;EAC3C,MAAM,CAACyB,MAAM,EAAEC,SAAS,CAAC,GAAG1B,QAAQ,CAAC,IAAI,CAAC;EAC1C,MAAM2B,OAAO,GAAGxB,WAAW,EAAE;EAC7B,MAAM;IAAEyB,QAAQ;IAAEC,eAAe;IAAEC;EAAmB,CAAC,GAAGxB,SAAS,EAAE;EACrE,MAAM,CAACyB,OAAO,EAAEC,SAAS,EAAEC,YAAY,CAAC,GAAGxB,UAAU,CAAC,CAAC,aAAa,CAAC,CAAC;EACtE,MAAMyB,QAAQ,GAAG/B,WAAW,EAAE;EAE9B,MAAMgC,WAAW,GAAG,CAClB;IAAEC,EAAE,EAAE,SAAS;IAAEC,IAAI,EAAE,YAAY;IAAEC,IAAI,EAAE,eAAe;IAAEC,OAAO,EAAE,IAAI;IAAEC,IAAI,eAAE,QAAC,IAAI;MAAA;MAAA;MAAA;IAAA;EAAI,CAAC;EAC3F;EACA;IAAEJ,EAAE,EAAE,QAAQ;IAAEC,IAAI,EAAE,QAAQ;IAAEC,IAAI,EAAE,EAAE;IAAEC,OAAO,EAAE,IAAI;IAAEC,IAAI,eAAE,QAAC,MAAM;MAAA;MAAA;MAAA;IAAA;EAAI,CAAC,CAC5E;EAED,MAAMC,eAAe,GAAG1C,WAAW,CAAEwB,MAAM,IAAK;IAC9CC,SAAS,CAACD,MAAM,CAAC;EACnB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMmB,eAAe,GAAG,cAAwB;IAAA,IAAjB;MAAEN,EAAE;MAAEE;IAAK,CAAC;IACzC,IAAIF,EAAE,KAAK,QAAQ,EAAE;MACnB,MAAM5B,UAAU,EAAE;MAClByB,YAAY,CAAC,aAAa,CAAC;MAC3BA,YAAY,CAAC,QAAQ,CAAC;MACtB,MAAMU,GAAG,GAAG,MAAMpC,WAAW,EAAE;MAC/BqC,OAAO,CAACC,GAAG,CAAC,KAAK,EAAEF,GAAG,CAAC;MAEvBC,OAAO,CAACC,GAAG,CAAC,0BAA0B,EAAEC,MAAM,CAACC,QAAQ,CAACC,QAAQ,CAAC;MACjE,IAAIF,MAAM,CAACC,QAAQ,CAACC,QAAQ,KAAK,GAAG,EAAE;QACpCJ,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;QACpBC,MAAM,CAACC,QAAQ,CAACE,MAAM,EAAE;MAC1B,CAAC,MAGD;QACEL,OAAO,CAACC,GAAG,CAAC,iBAAiB,EAAEhB,eAAe,CAAC;QAC/CC,kBAAkB,CAAC,KAAK,CAAC;QACzBI,QAAQ,CAAC,GAAG,CAAC;QACbY,MAAM,CAACC,QAAQ,CAACE,MAAM,EAAE;MAC1B;IAEF,CAAC,MAECX,IAAI,IAAIX,OAAO,CAACW,IAAI,CAAC;EACzB,CAAC;EAED,oBACE,QAAC,WAAW;IAAA,wBACV,QAAC,aAAa;MAAC,SAAS,EAAC,OAAO;MAAC,WAAW,EAAE,MAAMG,eAAe,CAAC,IAAI,CAAE;MAAC,YAAY,EAAE,MAAMA,eAAe,CAAC,KAAK,CAAE;MAAA,wBACpH,QAAC,MAAM;QAAC,GAAG,EAAEhB,MAAM,GAAGA,MAAM,GAAGrB,aAAc;QAAC,GAAG,EAAC;MAAQ;QAAA;QAAA;QAAA;MAAA,QAAG,eAC7D,QAAC,QAAQ;QAAA,UAAEwB,QAAQ,IAAI;MAAM;QAAA;QAAA;QAAA;MAAA,QAAY,eACzC,QAAC,QAAQ;QACP,SAAS,EAAC,aAAa;QACvB,QAAQ,EAAE;UACRsB,OAAO,EAAE;YACPC,OAAO,EAAE,CAAC;YACVC,CAAC,EAAE,EAAE;YACLb,OAAO,EAAE;UACX,CAAC;UACDc,MAAM,EAAE;YACNF,OAAO,EAAE,CAAC;YACVC,CAAC,EAAE,GAAG;YACNb,OAAO,EAAE;UACX;QACF,CAAE;QACF,UAAU,EAAE;UAAEe,QAAQ,EAAE;QAAI,CAAE;QAC9B,OAAO,EAAE,QAAS;QAClB,OAAO,EAAE/B,MAAM,GAAG,SAAS,GAAG,QAAS;QAAA,UAEtCY,WAAW,CAACoB,GAAG,CAAC;UAAA,IAAC;YAAEnB,EAAE;YAAEE,IAAI;YAAED,IAAI;YAAEE,OAAO;YAAEC;UAAK,CAAC;UAAA,OACjDD,OAAO,iBAAI,QAAC,YAAY;YAEtB,OAAO,EAAE,MAAMG,eAAe,CAAC;cAAEN,EAAE;cAAEE;YAAK,CAAC,CAAE;YAAA,WAC5CE,IAAI,eACL,QAAC,IAAI;cAAA,UAAEH;YAAI;cAAA;cAAA;cAAA;YAAA,QAAQ;UAAA,GAHdD,EAAE;YAAA;YAAA;YAAA;UAAA,QAIM;QAAA;MAChB;QAAA;QAAA;QAAA;MAAA,QACQ;IAAA;MAAA;MAAA;MAAA;IAAA,QACG,YAChB,uBAAC,QAAQ;MAAA;MAAA;MAAA;IAAA,QAAG;EAAA;IAAA;IAAA;IAAA;EAAA,QACA;AAElB,CAAC;AAAA,GAjFKd,OAAO;EAAA,QAGKnB,WAAW,EAC+BG,SAAS,EACxBG,UAAU,EACpCN,WAAW;AAAA;AAAA,MANxBmB,OAAO;AAkFb,eAAeA,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA"},"metadata":{},"sourceType":"module"}