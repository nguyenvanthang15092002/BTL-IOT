{"ast":null,"code":"import { getAsyncWithToken, postAsync } from \"../constant/request\";\n\nfunction getCookie() {\n  let name = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'currentuser';\n  const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\n  return v ? v[2] : null;\n}\n\nexport async function login(params) {\n  const url = process.env.REACT_APP_BACK_END + '/users/login';\n  const response = await postAsync(url, params);\n  return (response === null || response === void 0 ? void 0 : response.data) || [];\n}\nexport async function signup(data) {\n  const url = process.env.REACT_APP_BACK_END + '/users';\n  const response = await postAsync(url, data);\n  return (response === null || response === void 0 ? void 0 : response.data) || [];\n}\nexport async function getUserInfo() {\n  const url = process.env.REACT_APP_BACK_END + '/users/currentuser';\n  const response = await getAsyncWithToken(url);\n  return (response === null || response === void 0 ? void 0 : response.data) || [];\n}\nexport async function logoutUser() {\n  const url = process.env.REACT_APP_BACK_END + '/users/logout';\n  await fetch(url, {\n    method: 'POST',\n    cache: 'no-cache',\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + getCookie(),\n      'Accept': 'application/json'\n    }\n  }).then(data => {\n    console.log('data', data === null || data === void 0 ? void 0 : data.statusText);\n    return (data === null || data === void 0 ? void 0 : data.statusText) || '';\n  }).catch(err => console.log(`err`, err));\n}","map":{"version":3,"sources":["E:/CongNgheThongTinBk/20221/IotVaUngDung/btl/Nhom10/sourcecode/iot-web-fe/src/services/authenService.js"],"names":["getAsyncWithToken","postAsync","getCookie","name","v","document","cookie","match","login","params","url","process","env","REACT_APP_BACK_END","response","data","signup","getUserInfo","logoutUser","fetch","method","cache","headers","then","console","log","statusText","catch","err"],"mappings":"AAAA,SAASA,iBAAT,EAA4BC,SAA5B,QAA6C,qBAA7C;;AAGA,SAASC,SAAT,GAAyC;AAAA,MAAtBC,IAAsB,uEAAf,aAAe;AACvC,QAAMC,CAAC,GAAGC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsB,YAAYJ,IAAZ,GAAmB,eAAzC,CAAV;AACA,SAAOC,CAAC,GAAGA,CAAC,CAAC,CAAD,CAAJ,GAAU,IAAlB;AACD;;AAED,OAAO,eAAeI,KAAf,CAAqBC,MAArB,EAA6B;AAClC,QAAMC,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,cAA7C;AACA,QAAMC,QAAQ,GAAG,MAAMb,SAAS,CAACS,GAAD,EAAMD,MAAN,CAAhC;AACA,SAAO,CAAAK,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEC,IAAV,KAAkB,EAAzB;AACD;AACD,OAAO,eAAeC,MAAf,CAAsBD,IAAtB,EAA4B;AACjC,QAAML,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,QAA7C;AACA,QAAMC,QAAQ,GAAG,MAAMb,SAAS,CAACS,GAAD,EAAMK,IAAN,CAAhC;AACA,SAAO,CAAAD,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEC,IAAV,KAAkB,EAAzB;AACD;AACD,OAAO,eAAeE,WAAf,GAA6B;AAClC,QAAMP,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,oBAA7C;AACA,QAAMC,QAAQ,GAAG,MAAMd,iBAAiB,CAACU,GAAD,CAAxC;AACA,SAAO,CAAAI,QAAQ,SAAR,IAAAA,QAAQ,WAAR,YAAAA,QAAQ,CAAEC,IAAV,KAAkB,EAAzB;AACD;AACD,OAAO,eAAeG,UAAf,GAA4B;AACjC,QAAMR,GAAG,GAAGC,OAAO,CAACC,GAAR,CAAYC,kBAAZ,GAAiC,eAA7C;AACA,QAAMM,KAAK,CAACT,GAAD,EAAM;AACfU,IAAAA,MAAM,EAAE,MADO;AAEfC,IAAAA,KAAK,EAAE,UAFQ;AAGfC,IAAAA,OAAO,EAAE;AACP,sBAAgB,kBADT;AAEP,uBAAiB,YAAYpB,SAAS,EAF/B;AAGP,gBAAU;AAHH;AAHM,GAAN,CAAL,CASJqB,IATI,CASCR,IAAI,IAAI;AAAES,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBV,IAApB,aAAoBA,IAApB,uBAAoBA,IAAI,CAAEW,UAA1B;AAAsC,WAAO,CAAAX,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEW,UAAN,KAAoB,EAA3B;AAA+B,GAThF,EAUHC,KAVG,CAUGC,GAAG,IAAIJ,OAAO,CAACC,GAAR,CAAa,KAAb,EAAmBG,GAAnB,CAVV,CAAN;AAWD","sourcesContent":["import { getAsyncWithToken, postAsync } from \"../constant/request\";\r\n\r\n\r\nfunction getCookie(name = 'currentuser') {\r\n  const v = document.cookie.match('(^|;) ?' + name + '=([^;]*)(;|$)');\r\n  return v ? v[2] : null;\r\n}\r\n\r\nexport async function login(params) {\r\n  const url = process.env.REACT_APP_BACK_END + '/users/login'\r\n  const response = await postAsync(url, params)\r\n  return response?.data || []\r\n}\r\nexport async function signup(data) {\r\n  const url = process.env.REACT_APP_BACK_END + '/users'\r\n  const response = await postAsync(url, data)\r\n  return response?.data || []\r\n}\r\nexport async function getUserInfo() {\r\n  const url = process.env.REACT_APP_BACK_END + '/users/currentuser'\r\n  const response = await getAsyncWithToken(url)\r\n  return response?.data || []\r\n}\r\nexport async function logoutUser() {\r\n  const url = process.env.REACT_APP_BACK_END + '/users/logout'\r\n  await fetch(url, {\r\n    method: 'POST',\r\n    cache: 'no-cache',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': 'Bearer ' + getCookie(),\r\n      'Accept': 'application/json',\r\n    }\r\n  },\r\n  ).then(data => { console.log('data', data?.statusText);return data?.statusText || '' })\r\n    .catch(err => console.log(`err`, err))\r\n}"]},"metadata":{},"sourceType":"module"}