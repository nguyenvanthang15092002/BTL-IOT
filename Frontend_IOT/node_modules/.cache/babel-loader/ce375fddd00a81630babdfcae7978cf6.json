{"ast":null,"code":"var _jsxFileName = \"D:\\\\IoT v\\xE0 \\u1EE9ng d\\u1EE5ng\\\\IoT_Project\\\\Frontend_IOT\\\\src\\\\screens\\\\Login\\\\context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useMemo, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toastError, toastSuccess } from \"../../constant/toast\";\nimport { login, signup } from \"../../services/authenService\";\n\n//context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const LoginContext = /*#__PURE__*/createContext({});\n\n//hook\nexport const useLoginContext = () => {\n  _s();\n  return useContext(LoginContext);\n};\n\n//provider\n_s(useLoginContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const LoginContextProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const navigate = useNavigate();\n  const [cookies, setCookie, removeCookie] = useCookies(['currentuser']);\n  const [userid, setUserid] = useState(\"\");\n  const handleSignup = async (username, password) => {\n    let tmp = `{ \"username\": \"${username}\", \"password\": \"${password}\" }`;\n    let params = JSON.parse(tmp);\n    if (username && password) {\n      const response = await signup(params);\n      if (response === null || response === void 0 ? void 0 : response.token) {\n        toastSuccess(\"Success Notification !\");\n        await setCookie(\"currentuser\", response === null || response === void 0 ? void 0 : response.token);\n        setTimeout(() => window.location.reload(), 2000);\n      } else toastError(response === null || response === void 0 ? void 0 : response.error);\n    } else {\n      toastError(\"Error\");\n    }\n  };\n  const handleLogin = async (username, password) => {\n    let tmp = `{ \"username\": \"${username}\", \"password\": \"${password}\" }`;\n    let params = JSON.parse(tmp);\n    if (username && password) {\n      const response = await login(params);\n      if (response === null || response === void 0 ? void 0 : response.token) {\n        toastSuccess(\"Success Notification !\");\n        await setCookie(\"currentuser\", response === null || response === void 0 ? void 0 : response.token);\n        setTimeout(() => window.location.reload(), 2000);\n      } else toastError(response === null || response === void 0 ? void 0 : response.error);\n    } else {\n      toastError(\"Error\");\n    }\n  };\n  const value = useMemo(() => ({\n    handleSignup,\n    handleLogin\n  }), []);\n  return /*#__PURE__*/_jsxDEV(LoginContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s2(LoginContextProvider, \"+MzlHMCoK4n8N1uBr4vNIkHC49g=\", false, function () {\n  return [useNavigate, useCookies];\n});\n_c = LoginContextProvider;\nvar _c;\n$RefreshReg$(_c, \"LoginContextProvider\");","map":{"version":3,"names":["createContext","useContext","useMemo","useState","useCookies","useNavigate","toastError","toastSuccess","login","signup","LoginContext","useLoginContext","LoginContextProvider","children","navigate","cookies","setCookie","removeCookie","userid","setUserid","handleSignup","username","password","tmp","params","JSON","parse","response","token","setTimeout","window","location","reload","error","handleLogin","value"],"sources":["D:/IoT và ứng dụng/IoT_Project/Frontend_IOT/src/screens/Login/context.js"],"sourcesContent":["import { createContext, useContext, useMemo, useState } from \"react\";\r\nimport { useCookies } from \"react-cookie\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toastError, toastSuccess } from \"../../constant/toast\";\r\nimport { login, signup } from \"../../services/authenService\";\r\n\r\n\r\n//context\r\nexport const LoginContext = createContext({})\r\n\r\n//hook\r\nexport const useLoginContext = () => useContext(LoginContext)\r\n\r\n//provider\r\nexport const LoginContextProvider = ({ children }) => {\r\n  const navigate = useNavigate()\r\n  const [cookies, setCookie, removeCookie] = useCookies(['currentuser']);\r\n  const [userid, setUserid] = useState(\"\")\r\n  const handleSignup = async (username, password) => {\r\n    let tmp = `{ \"username\": \"${username}\", \"password\": \"${password}\" }`\r\n    let params = JSON.parse(tmp)\r\n    if (username && password) {\r\n      const response = await signup(params)\r\n      if (response?.token) {\r\n        toastSuccess(\"Success Notification !\")\r\n        await setCookie(\"currentuser\", response?.token)\r\n\r\n        setTimeout(() => window.location.reload(), 2000)\r\n\r\n      }\r\n      else\r\n        toastError(response?.error)\r\n    }\r\n    else {\r\n      toastError(\"Error\")\r\n    }\r\n  }\r\n\r\n  const handleLogin = async (username, password) => {\r\n    let tmp = `{ \"username\": \"${username}\", \"password\": \"${password}\" }`\r\n    let params = JSON.parse(tmp)\r\n\r\n    if (username && password) {\r\n      const response = await login(params)\r\n\r\n      if (response?.token) {\r\n        toastSuccess(\"Success Notification !\")\r\n        await setCookie(\"currentuser\", response?.token)\r\n\r\n        setTimeout(() => window.location.reload(), 2000)\r\n\r\n      }\r\n      else\r\n        toastError(response?.error)\r\n    }\r\n    else {\r\n      toastError(\"Error\")\r\n    }\r\n  }\r\n\r\n\r\n  const value = useMemo(() => ({\r\n    handleSignup, handleLogin\r\n  }),\r\n    [])\r\n  return (\r\n    <LoginContext.Provider value={value}>\r\n      {children}\r\n    </LoginContext.Provider>\r\n  )\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}