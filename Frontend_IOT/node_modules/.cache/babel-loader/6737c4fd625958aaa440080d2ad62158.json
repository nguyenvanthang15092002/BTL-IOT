{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { getUserInfo } from \"../services/authenService\";\nconst useAuthen = () => {\n  _s();\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [cookies, setCookie, removeCookie] = useCookies(['userid']);\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState('');\n  useEffect(() => {\n    setLoading(true);\n    getUserInfo().then(res => {\n      if (Object.keys(res).length !== 0 && res.constructor === Object) {\n        setIsAuthenticated(true);\n        console.log('huy');\n        setUsername(res === null || res === void 0 ? void 0 : res.username);\n        setCookie(\"userid\", res === null || res === void 0 ? void 0 : res._id);\n      } else {\n        setIsAuthenticated(false);\n      }\n    }).catch(error => {\n      setIsAuthenticated(false);\n    }).finally(() => setLoading(false));\n  }, [isAuthenticated]);\n  return {\n    isAuthenticated,\n    loading,\n    username,\n    setIsAuthenticated\n  };\n};\n_s(useAuthen, \"dmyCbv3MA/PxgKQJvjhbAPIl1LU=\", false, function () {\n  return [useCookies];\n});\nexport default useAuthen;","map":{"version":3,"names":["useEffect","useState","useCookies","getUserInfo","useAuthen","isAuthenticated","setIsAuthenticated","cookies","setCookie","removeCookie","loading","setLoading","username","setUsername","then","res","Object","keys","length","constructor","console","log","_id","catch","error","finally"],"sources":["C:/Users/HHC/Downloads/IoT-Project/Frontend_IOT/src/hooks/useAuthen.js"],"sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { useCookies } from \"react-cookie\";\r\nimport { getUserInfo } from \"../services/authenService\"\r\n\r\nconst useAuthen = () => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [cookies, setCookie, removeCookie] = useCookies(['userid']);\r\n  const [loading, setLoading] = useState(false)\r\n  const [username, setUsername] = useState('')\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    getUserInfo()\r\n      .then((res) => {\r\n        if (Object.keys(res).length !== 0 && res.constructor === Object) {\r\n          setIsAuthenticated(true)\r\n            console.log('huy')\r\n          setUsername(res?.username)\r\n          setCookie(\"userid\", res?._id)\r\n        }\r\n        else{\r\n          setIsAuthenticated(false)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setIsAuthenticated(false)\r\n      })\r\n      .finally(() =>\r\n        setLoading(false))\r\n  }, [isAuthenticated])\r\n\r\n  return { isAuthenticated, loading, username, setIsAuthenticated }\r\n}\r\nexport default useAuthen\r\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,UAAU,QAAQ,cAAc;AACzC,SAASC,WAAW,QAAQ,2BAA2B;AAEvD,MAAMC,SAAS,GAAG,MAAM;EAAA;EACtB,MAAM,CAACC,eAAe,EAAEC,kBAAkB,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;EAC7D,MAAM,CAACM,OAAO,EAAEC,SAAS,EAAEC,YAAY,CAAC,GAAGP,UAAU,CAAC,CAAC,QAAQ,CAAC,CAAC;EACjE,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACW,QAAQ,EAAEC,WAAW,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAE5CD,SAAS,CAAC,MAAM;IACdW,UAAU,CAAC,IAAI,CAAC;IAChBR,WAAW,EAAE,CACVW,IAAI,CAAEC,GAAG,IAAK;MACb,IAAIC,MAAM,CAACC,IAAI,CAACF,GAAG,CAAC,CAACG,MAAM,KAAK,CAAC,IAAIH,GAAG,CAACI,WAAW,KAAKH,MAAM,EAAE;QAC/DV,kBAAkB,CAAC,IAAI,CAAC;QACtBc,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;QACpBR,WAAW,CAACE,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEH,QAAQ,CAAC;QAC1BJ,SAAS,CAAC,QAAQ,EAAEO,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEO,GAAG,CAAC;MAC/B,CAAC,MACG;QACFhB,kBAAkB,CAAC,KAAK,CAAC;MAC3B;IACF,CAAC,CAAC,CACDiB,KAAK,CAAEC,KAAK,IAAK;MAChBlB,kBAAkB,CAAC,KAAK,CAAC;IAC3B,CAAC,CAAC,CACDmB,OAAO,CAAC,MACPd,UAAU,CAAC,KAAK,CAAC,CAAC;EACxB,CAAC,EAAE,CAACN,eAAe,CAAC,CAAC;EAErB,OAAO;IAAEA,eAAe;IAAEK,OAAO;IAAEE,QAAQ;IAAEN;EAAmB,CAAC;AACnE,CAAC;AAAA,GA5BKF,SAAS;EAAA,QAE8BF,UAAU;AAAA;AA2BvD,eAAeE,SAAS"},"metadata":{},"sourceType":"module"}