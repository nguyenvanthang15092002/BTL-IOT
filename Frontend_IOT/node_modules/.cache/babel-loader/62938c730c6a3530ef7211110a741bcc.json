{"ast":null,"code":"var _jsxFileName = \"E:\\\\CongNgheThongTinBk\\\\20221\\\\Project_3\\\\iot-btl\\\\client\\\\src\\\\screens\\\\Statistics\\\\context.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useContext, useEffect, useMemo, useState } from \"react\";\nimport { getNearestCity } from \"../../services/airVisualService\";\nimport { getDeviceById } from \"../../services/devicesServices\";\n\n//context\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const StatisticsContext = /*#__PURE__*/createContext({});\n\n//hook\nexport const useStatisticsContext = () => {\n  _s();\n  return useContext(StatisticsContext);\n};\n\n//provider\n_s(useStatisticsContext, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const StatisticsContextProvider = _ref => {\n  _s2();\n  let {\n    children\n  } = _ref;\n  const [device, setDevice] = useState();\n  const [nearestCity, setNearestCity] = useState();\n  useEffect(() => {\n    getDeviceItemById().then(r => console.log(r));\n    infoNearestCity().then(r => console.log(r));\n  }, []);\n  const getDeviceItemById = async () => {\n    try {\n      if (window) var id = window.location.pathname.split('/');\n      let tmp = await getDeviceById(id[2]);\n      setDevice((tmp === null || tmp === void 0 ? void 0 : tmp.device) || {});\n    } catch (error) {\n      console.log(`error`, error);\n    }\n  };\n  setInterval(getDeviceItemById, 30000);\n  const infoNearestCity = async () => {\n    let info = await getNearestCity();\n    setNearestCity(info);\n  };\n  const value = useMemo(() => ({\n    device,\n    nearestCity\n  }),\n  // eslint-disable-next-line no-sequences\n  [device, nearestCity]);\n  return /*#__PURE__*/_jsxDEV(StatisticsContext.Provider, {\n    value: value,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n};\n_s2(StatisticsContextProvider, \"Id47yGO5M0RPtOImipHcaA66DOs=\");\n_c = StatisticsContextProvider;\nvar _c;\n$RefreshReg$(_c, \"StatisticsContextProvider\");","map":{"version":3,"names":["createContext","useContext","useEffect","useMemo","useState","getNearestCity","getDeviceById","StatisticsContext","useStatisticsContext","StatisticsContextProvider","children","device","setDevice","nearestCity","setNearestCity","getDeviceItemById","then","r","console","log","infoNearestCity","window","id","location","pathname","split","tmp","error","setInterval","info","value"],"sources":["E:/CongNgheThongTinBk/20221/Project_3/iot-btl/client/src/screens/Statistics/context.js"],"sourcesContent":["import { createContext, useContext, useEffect, useMemo, useState } from \"react\";\r\nimport { getNearestCity } from \"../../services/airVisualService\";\r\nimport { getDeviceById } from \"../../services/devicesServices\";\r\n\r\n//context\r\nexport const StatisticsContext = createContext({})\r\n\r\n//hook\r\nexport const useStatisticsContext = () => useContext(StatisticsContext)\r\n\r\n//provider\r\nexport const StatisticsContextProvider = ({ children }) => {\r\n  const [device, setDevice] = useState()\r\n  const [nearestCity, setNearestCity] = useState()\r\n\r\n  useEffect(() => {\r\n    getDeviceItemById().then(r => console.log(r))\r\n    infoNearestCity().then(r => console.log(r))\r\n  }, [])\r\n\r\n  const getDeviceItemById = async () => {\r\n    try {\r\n      if (window) var id = window.location.pathname.split('/')\r\n      let tmp = await getDeviceById(id[2])\r\n      setDevice(tmp?.device || {})\r\n    } catch (error) {\r\n      console.log(`error`, error)\r\n    }\r\n\r\n  }\r\n\r\n  setInterval(getDeviceItemById, 30000)\r\n\r\n  const infoNearestCity = async () => {\r\n    let info = await getNearestCity()\r\n    setNearestCity(info)\r\n\r\n  }\r\n\r\n\r\n\r\n  const value = useMemo(() => ({\r\n    device, nearestCity\r\n  }),\r\n    // eslint-disable-next-line no-sequences\r\n    [device, nearestCity])\r\n  return (\r\n    <StatisticsContext.Provider value={value}>\r\n      {children}\r\n    </StatisticsContext.Provider>\r\n  )\r\n}\r\n"],"mappings":";;;AAAA,SAASA,aAAa,EAAEC,UAAU,EAAEC,SAAS,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAC/E,SAASC,cAAc,QAAQ,iCAAiC;AAChE,SAASC,aAAa,QAAQ,gCAAgC;;AAE9D;AAAA;AACA,OAAO,MAAMC,iBAAiB,gBAAGP,aAAa,CAAC,CAAC,CAAC,CAAC;;AAElD;AACA,OAAO,MAAMQ,oBAAoB,GAAG;EAAA;EAAA,OAAMP,UAAU,CAACM,iBAAiB,CAAC;AAAA;;AAEvE;AAAA,GAFaC,oBAAoB;AAGjC,OAAO,MAAMC,yBAAyB,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EACpD,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGR,QAAQ,EAAE;EACtC,MAAM,CAACS,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,EAAE;EAEhDF,SAAS,CAAC,MAAM;IACda,iBAAiB,EAAE,CAACC,IAAI,CAACC,CAAC,IAAIC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAAC;IAC7CG,eAAe,EAAE,CAACJ,IAAI,CAACC,CAAC,IAAIC,OAAO,CAACC,GAAG,CAACF,CAAC,CAAC,CAAC;EAC7C,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMF,iBAAiB,GAAG,YAAY;IACpC,IAAI;MACF,IAAIM,MAAM,EAAE,IAAIC,EAAE,GAAGD,MAAM,CAACE,QAAQ,CAACC,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC;MACxD,IAAIC,GAAG,GAAG,MAAMpB,aAAa,CAACgB,EAAE,CAAC,CAAC,CAAC,CAAC;MACpCV,SAAS,CAAC,CAAAc,GAAG,aAAHA,GAAG,uBAAHA,GAAG,CAAEf,MAAM,KAAI,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOgB,KAAK,EAAE;MACdT,OAAO,CAACC,GAAG,CAAE,OAAM,EAAEQ,KAAK,CAAC;IAC7B;EAEF,CAAC;EAEDC,WAAW,CAACb,iBAAiB,EAAE,KAAK,CAAC;EAErC,MAAMK,eAAe,GAAG,YAAY;IAClC,IAAIS,IAAI,GAAG,MAAMxB,cAAc,EAAE;IACjCS,cAAc,CAACe,IAAI,CAAC;EAEtB,CAAC;EAID,MAAMC,KAAK,GAAG3B,OAAO,CAAC,OAAO;IAC3BQ,MAAM;IAAEE;EACV,CAAC,CAAC;EACA;EACA,CAACF,MAAM,EAAEE,WAAW,CAAC,CAAC;EACxB,oBACE,QAAC,iBAAiB,CAAC,QAAQ;IAAC,KAAK,EAAEiB,KAAM;IAAA,UACtCpB;EAAQ;IAAA;IAAA;IAAA;EAAA,QACkB;AAEjC,CAAC;AAAA,IAxCYD,yBAAyB;AAAA,KAAzBA,yBAAyB;AAAA;AAAA"},"metadata":{},"sourceType":"module"}