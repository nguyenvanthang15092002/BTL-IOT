{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport { useCookies } from \"react-cookie\";\nimport { getUserInfo } from \"../services/authenService\";\n\nconst useAuthen = () => {\n  _s();\n\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [cookies, setCookie, removeCookie] = useCookies(['userid']);\n  const [loading, setLoading] = useState(false);\n  const [username, setUsername] = useState('');\n  useEffect(() => {\n    setLoading(true);\n    getUserInfo().then(res => {\n      if (Object.keys(res).length !== 0 && res.constructor === Object) {\n        setIsAuthenticated(true);\n        setUsername(res === null || res === void 0 ? void 0 : res.username);\n        setCookie(\"userid\", res === null || res === void 0 ? void 0 : res._id);\n      } else {\n        setIsAuthenticated(false);\n      }\n    }).catch(error => {\n      setIsAuthenticated(false);\n    }).finally(() => setLoading(false));\n  }, [isAuthenticated]);\n  return {\n    isAuthenticated,\n    loading,\n    username,\n    setIsAuthenticated\n  };\n};\n\n_s(useAuthen, \"dmyCbv3MA/PxgKQJvjhbAPIl1LU=\", false, function () {\n  return [useCookies];\n});\n\nexport default useAuthen;","map":{"version":3,"sources":["E:/CongNgheThongTinBk/20221/IotVaUngDung/btl/Nhom10/sourcecode/iot-web-fe/src/hooks/useAuthen.js"],"names":["useEffect","useState","useCookies","getUserInfo","useAuthen","isAuthenticated","setIsAuthenticated","cookies","setCookie","removeCookie","loading","setLoading","username","setUsername","then","res","Object","keys","length","constructor","_id","catch","error","finally"],"mappings":";;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,SAASC,UAAT,QAA2B,cAA3B;AACA,SAASC,WAAT,QAA4B,2BAA5B;;AAEA,MAAMC,SAAS,GAAG,MAAM;AAAA;;AACtB,QAAM,CAACC,eAAD,EAAkBC,kBAAlB,IAAwCL,QAAQ,CAAC,KAAD,CAAtD;AACA,QAAM,CAACM,OAAD,EAAUC,SAAV,EAAqBC,YAArB,IAAqCP,UAAU,CAAC,CAAC,QAAD,CAAD,CAArD;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACW,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,EAAD,CAAxC;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAR,IAAAA,WAAW,GACRW,IADH,CACSC,GAAD,IAAS;AACb,UAAIC,MAAM,CAACC,IAAP,CAAYF,GAAZ,EAAiBG,MAAjB,KAA4B,CAA5B,IAAiCH,GAAG,CAACI,WAAJ,KAAoBH,MAAzD,EAAiE;AAC/DV,QAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAO,QAAAA,WAAW,CAACE,GAAD,aAACA,GAAD,uBAACA,GAAG,CAAEH,QAAN,CAAX;AACAJ,QAAAA,SAAS,CAAC,QAAD,EAAWO,GAAX,aAAWA,GAAX,uBAAWA,GAAG,CAAEK,GAAhB,CAAT;AACD,OAJD,MAKI;AACFd,QAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD;AACF,KAVH,EAWGe,KAXH,CAWUC,KAAD,IAAW;AAChBhB,MAAAA,kBAAkB,CAAC,KAAD,CAAlB;AACD,KAbH,EAcGiB,OAdH,CAcW,MACPZ,UAAU,CAAC,KAAD,CAfd;AAgBD,GAlBQ,EAkBN,CAACN,eAAD,CAlBM,CAAT;AAoBA,SAAO;AAAEA,IAAAA,eAAF;AAAmBK,IAAAA,OAAnB;AAA4BE,IAAAA,QAA5B;AAAsCN,IAAAA;AAAtC,GAAP;AACD,CA3BD;;GAAMF,S;UAEuCF,U;;;AA0B7C,eAAeE,SAAf","sourcesContent":["import { useEffect, useState } from \"react\"\r\nimport { useCookies } from \"react-cookie\";\r\nimport { getUserInfo } from \"../services/authenService\"\r\n\r\nconst useAuthen = () => {\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [cookies, setCookie, removeCookie] = useCookies(['userid']);\r\n  const [loading, setLoading] = useState(false)\r\n  const [username, setUsername] = useState('')\r\n\r\n  useEffect(() => {\r\n    setLoading(true)\r\n    getUserInfo()\r\n      .then((res) => {\r\n        if (Object.keys(res).length !== 0 && res.constructor === Object) {\r\n          setIsAuthenticated(true)\r\n          setUsername(res?.username)\r\n          setCookie(\"userid\", res?._id)\r\n        }\r\n        else{\r\n          setIsAuthenticated(false)\r\n        }\r\n      })\r\n      .catch((error) => {\r\n        setIsAuthenticated(false)\r\n      })\r\n      .finally(() =>\r\n        setLoading(false))\r\n  }, [isAuthenticated])\r\n\r\n  return { isAuthenticated, loading, username, setIsAuthenticated }\r\n}\r\nexport default useAuthen"]},"metadata":{},"sourceType":"module"}