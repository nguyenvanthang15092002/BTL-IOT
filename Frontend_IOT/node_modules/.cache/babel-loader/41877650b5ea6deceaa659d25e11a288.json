{"ast":null,"code":"var _jsxFileName = \"E:\\\\CongNgheThongTinBk\\\\20221\\\\IotVaUngDung\\\\btl\\\\Nhom10\\\\sourcecode\\\\iot-web-fe\\\\src\\\\screens\\\\HomePage\\\\components\\\\WorldMap.js\",\n    _s = $RefreshSig$();\n\nimport _styled from \"@emotion/styled\";\nimport React, { memo, useRef, useState } from 'react';\nimport ReactMapGL, { FullscreenControl, GeolocateControl, Marker, Popup } from 'react-map-gl';\nimport { MapContextProvider, useMapContext } from '../context';\nimport \"../style.css\";\nimport NearestCityInfo from './NearestCityInfo';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst HeaderContainer = _styled.div({\n  \"display\": \"flex\",\n  \"paddingTop\": \"2rem\",\n  \"justifyContent\": \"space-around\",\n  \"alignItems\": \"center\"\n});\n\n_c = HeaderContainer;\n\nconst Header = _styled.h1({});\n\n_c2 = Header;\n\nconst SearchBar = _styled.input({\n  \"width\": \"50%\",\n  \"outline\": \"2px solid transparent\",\n  \"outlineOffset\": \"2px\",\n  \"height\": \"3rem\",\n  \"borderRadius\": \"0.75rem\",\n  \"borderStyle\": \"none\",\n  \"alignItems\": \"flex-end\",\n  \"--tw-shadow\": \"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)\",\n  \"boxShadow\": \"var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)\",\n  \"padding\": \"0.5rem\",\n  \"fontWeight\": \"600\"\n});\n\nconst PageContainer = _styled.div({\n  \"padding\": \"1.25rem\",\n  \"zIndex\": \"10\"\n});\n\n_c3 = PageContainer;\nconst geolocateControlStyle = {\n  right: 10,\n  top: 10\n};\n\nconst CircleIcon = _styled.div(_c4 = _ref => {\n  let {\n    props\n  } = _ref;\n  return [{\n    \"borderRadius\": \"9999px\",\n    \"--tw-text-opacity\": \"1\",\n    \"color\": \"rgba(255, 255, 255, var(--tw-text-opacity))\",\n    \"width\": \"2rem\",\n    \"height\": \"2rem\",\n    \"fontSize\": \"0.875rem\"\n  }, props <= 50 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(72, 187, 120, var(--tw-bg-opacity))\"\n  }, props <= 100 && props >= 51 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(236, 201, 75, var(--tw-bg-opacity))\"\n  }, props <= 150 && props >= 101 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(254, 178, 178, var(--tw-bg-opacity))\"\n  }, props <= 200 && props >= 151 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(245, 101, 101, var(--tw-bg-opacity))\"\n  }, props <= 300 && props >= 201 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(159, 122, 234, var(--tw-bg-opacity))\"\n  }, props > 300 && {\n    \"--tw-bg-opacity\": \"1\",\n    \"backgroundColor\": \"rgba(116, 42, 42, var(--tw-bg-opacity))\"\n  }];\n});\n\n_c5 = CircleIcon;\n\nconst WorldMapImpl = () => {\n  _s();\n\n  const mapRef = useRef();\n  const {\n    geocodingCity\n  } = useMapContext();\n  const [viewport, setViewport] = useState({\n    width: \"50%\",\n    height: '805px',\n    latitude: 21.437,\n    longitude: 105.123,\n    zoom: 4\n  });\n  const [popupIndex, setPopUpIndex] = useState(false);\n\n  const renderPopup = _ref2 => {\n    var _item$data, _item$data$location, _item$data2, _item$data2$location;\n\n    let {\n      item\n    } = _ref2;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: popupIndex && /*#__PURE__*/_jsxDEV(Popup, {\n        tipSize: 5,\n        anchor: \"bottom-left\",\n        longitude: (item === null || item === void 0 ? void 0 : (_item$data = item.data) === null || _item$data === void 0 ? void 0 : (_item$data$location = _item$data.location) === null || _item$data$location === void 0 ? void 0 : _item$data$location.coordinates[0]) || 105.123,\n        latitude: (item === null || item === void 0 ? void 0 : (_item$data2 = item.data) === null || _item$data2 === void 0 ? void 0 : (_item$data2$location = _item$data2.location) === null || _item$data2$location === void 0 ? void 0 : _item$data2$location.coordinates[1]) || 21.437,\n        onMouseLeave: e => {\n          e.preventDefault();\n          setPopUpIndex(false);\n        },\n        closeOnClick: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this)\n    }, void 0, false);\n  };\n\n  const fullscreenControlStyle = {\n    right: 10,\n    bottom: 10\n  };\n  setInterval(() => {\n    const h1 = document.getElementsByClassName(\"headerPage\");\n\n    h1.onanimationend = function () {\n      h1.classList.add(\"anim-end\");\n      h1.classList.remove(\"anim-restart\");\n    };\n  }, 10000);\n  return /*#__PURE__*/_jsxDEV(PageContainer, {\n    children: [/*#__PURE__*/_jsxDEV(HeaderContainer, {\n      children: /*#__PURE__*/_jsxDEV(Header, {\n        className: \"headerPage\",\n        id: \"headerPage\",\n        children: \"Explore the air quality anywhere in the world\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        gap: '50px'\n      },\n      children: [/*#__PURE__*/_jsxDEV(ReactMapGL, {\n        ref: mapRef,\n        ...viewport,\n        mapStyle: \"mapbox://styles/mapbox/streets-v11\",\n        onViewportChange: nextViewport => setViewport(nextViewport),\n        mapboxApiAccessToken: process.env.REACT_APP_MAP_API_TOKEN,\n        children: [geocodingCity.length > 0 && (geocodingCity === null || geocodingCity === void 0 ? void 0 : geocodingCity.map(item => {\n          var _item$data3, _item$data4, _item$data4$location, _item$data5, _item$data5$location, _item$data6, _item$data6$current, _item$data6$current$p, _item$data7, _item$data7$current, _item$data7$current$p;\n\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(Marker, {\n              longitude: (item === null || item === void 0 ? void 0 : (_item$data4 = item.data) === null || _item$data4 === void 0 ? void 0 : (_item$data4$location = _item$data4.location) === null || _item$data4$location === void 0 ? void 0 : _item$data4$location.coordinates[0]) || 105.123,\n              latitude: (item === null || item === void 0 ? void 0 : (_item$data5 = item.data) === null || _item$data5 === void 0 ? void 0 : (_item$data5$location = _item$data5.location) === null || _item$data5$location === void 0 ? void 0 : _item$data5$location.coordinates[1]) || 21.437,\n              onMouseEnter: e => {\n                e.preventDefault();\n                setPopUpIndex(true);\n              },\n              onMouseLeave: e => {\n                e.preventDefault();\n                setPopUpIndex(false);\n              },\n              children: /*#__PURE__*/_jsxDEV(CircleIcon, {\n                props: (item === null || item === void 0 ? void 0 : (_item$data6 = item.data) === null || _item$data6 === void 0 ? void 0 : (_item$data6$current = _item$data6.current) === null || _item$data6$current === void 0 ? void 0 : (_item$data6$current$p = _item$data6$current.pollution) === null || _item$data6$current$p === void 0 ? void 0 : _item$data6$current$p.aqius) || 100,\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: (item === null || item === void 0 ? void 0 : (_item$data7 = item.data) === null || _item$data7 === void 0 ? void 0 : (_item$data7$current = _item$data7.current) === null || _item$data7$current === void 0 ? void 0 : (_item$data7$current$p = _item$data7$current.pollution) === null || _item$data7$current$p === void 0 ? void 0 : _item$data7$current$p.aqius) || 100\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 109,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 108,\n                columnNumber: 19\n              }, this)\n            }, (item === null || item === void 0 ? void 0 : (_item$data3 = item.data) === null || _item$data3 === void 0 ? void 0 : _item$data3.city) || \"Hanoi\", false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 17\n            }, this), renderPopup(item)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 15\n          }, this);\n        })), /*#__PURE__*/_jsxDEV(GeolocateControl, {\n          style: geolocateControlStyle,\n          positionOptions: {\n            enableHighAccuracy: true\n          },\n          trackUserLocation: true,\n          showUserLocation: true,\n          showUserHeading: true,\n          auto: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FullscreenControl, {\n          style: fullscreenControlStyle\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(NearestCityInfo, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(WorldMapImpl, \"2E1eYgfMFQxErU/sNIRf8sl1yik=\", false, function () {\n  return [useMapContext];\n});\n\n_c6 = WorldMapImpl;\n\nconst WorldMap = () => /*#__PURE__*/_jsxDEV(MapContextProvider, {\n  children: /*#__PURE__*/_jsxDEV(WorldMapImpl, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 135,\n  columnNumber: 3\n}, this);\n\n_c7 = WorldMap;\nexport default _c8 = /*#__PURE__*/memo(WorldMap);\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8;\n\n$RefreshReg$(_c, \"HeaderContainer\");\n$RefreshReg$(_c2, \"Header\");\n$RefreshReg$(_c3, \"PageContainer\");\n$RefreshReg$(_c4, \"CircleIcon$styled.div\");\n$RefreshReg$(_c5, \"CircleIcon\");\n$RefreshReg$(_c6, \"WorldMapImpl\");\n$RefreshReg$(_c7, \"WorldMap\");\n$RefreshReg$(_c8, \"%default%\");","map":{"version":3,"sources":["E:/CongNgheThongTinBk/20221/IotVaUngDung/btl/Nhom10/sourcecode/iot-web-fe/src/screens/HomePage/components/WorldMap.js"],"names":["React","memo","useRef","useState","ReactMapGL","FullscreenControl","GeolocateControl","Marker","Popup","MapContextProvider","useMapContext","NearestCityInfo","HeaderContainer","tw","div","Header","h1","SearchBar","input","PageContainer","geolocateControlStyle","right","top","CircleIcon","styled","props","WorldMapImpl","mapRef","geocodingCity","viewport","setViewport","width","height","latitude","longitude","zoom","popupIndex","setPopUpIndex","renderPopup","item","data","location","coordinates","e","preventDefault","fullscreenControlStyle","bottom","setInterval","document","getElementsByClassName","onanimationend","classList","add","remove","display","gap","nextViewport","process","env","REACT_APP_MAP_API_TOKEN","length","map","current","pollution","aqius","city","enableHighAccuracy","WorldMap"],"mappings":"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","sourcesContent":["import React, { memo, useRef, useState } from 'react';\r\nimport ReactMapGL, { FullscreenControl, GeolocateControl, Marker, Popup } from 'react-map-gl';\r\nimport tw, { styled } from 'twin.macro';\r\nimport { MapContextProvider, useMapContext } from '../context';\r\nimport \"../style.css\";\r\nimport NearestCityInfo from './NearestCityInfo';\r\n\r\nconst HeaderContainer = tw.div`flex pt-8 justify-around items-center`\r\nconst Header = tw.h1``\r\nconst SearchBar = tw.input`w-1/2 outline-none h-12 rounded-xl border-none items-end shadow-xl p-2 font-semibold`\r\nconst PageContainer = tw.div`p-5 z-10`\r\n\r\nconst geolocateControlStyle = {\r\n  right: 10,\r\n  top: 10\r\n};\r\n\r\nconst CircleIcon = styled.div(({ props }) => [\r\n  tw`rounded-full text-white w-8 h-8 text-sm`,\r\n  props <= 50 && tw`bg-green-500`,\r\n  props <= 100 && props >= 51 && tw`bg-yellow-500`,\r\n  props <= 150 && props >= 101 && tw`bg-red-300`,\r\n  props <= 200 && props >= 151 && tw`bg-red-500`,\r\n  props <= 300 && props >= 201 && tw`bg-purple-500`,\r\n  props > 300 && tw`bg-red-900`\r\n])\r\n\r\nconst WorldMapImpl = () => {\r\n  const mapRef = useRef();\r\n  const { geocodingCity } = useMapContext();\r\n  const [viewport, setViewport] = useState({\r\n    width: \"50%\",\r\n    height: '805px',\r\n    latitude: 21.437,\r\n    longitude: 105.123,\r\n    zoom: 4\r\n  });\r\n  const [popupIndex, setPopUpIndex] = useState(false)\r\n\r\n  const renderPopup = ({ item }) => {\r\n    return (\r\n      <>\r\n        {popupIndex && (\r\n          <Popup\r\n            tipSize={5}\r\n            anchor=\"bottom-left\"\r\n            longitude={item?.data?.location?.coordinates[0] || 105.123}\r\n            latitude={item?.data?.location?.coordinates[1] || 21.437}\r\n            onMouseLeave={(e) => {\r\n              e.preventDefault();\r\n              setPopUpIndex(false);\r\n            }}\r\n            closeOnClick={true}\r\n          >\r\n\r\n          </Popup>\r\n        )}\r\n      </>\r\n\r\n    )\r\n  }\r\n\r\n  const fullscreenControlStyle = {\r\n    right: 10,\r\n    bottom: 10\r\n  };\r\n\r\n\r\n  setInterval(() => {\r\n    const h1 = document.getElementsByClassName(\"headerPage\");\r\n    h1.onanimationend = function () {\r\n      h1.classList.add(\"anim-end\");\r\n      h1.classList.remove(\"anim-restart\");\r\n    }\r\n  }, 10000);\r\n\r\n\r\n  return (\r\n    <PageContainer>\r\n      <HeaderContainer>\r\n        <Header className='headerPage' id='headerPage'>Explore the air quality anywhere in the world</Header>\r\n        {/* <SearchBar placeholder=\"   Your country, city or location ...\" />\r\n        <Search style={{ position: 'absolute', right: 0, marginRight: '6.2rem', background: \"#fff\" }} /> */}\r\n      </HeaderContainer>\r\n      <div style={{ display: 'flex', gap: '50px' }}>\r\n        <ReactMapGL\r\n          ref={mapRef}\r\n          {...viewport}\r\n          mapStyle=\"mapbox://styles/mapbox/streets-v11\"\r\n          onViewportChange={nextViewport => setViewport(nextViewport)}\r\n          mapboxApiAccessToken={process.env.REACT_APP_MAP_API_TOKEN}>\r\n          {\r\n            geocodingCity.length > 0 && geocodingCity?.map((item) => (\r\n              <div>\r\n                <Marker\r\n                  key={item?.data?.city || \"Hanoi\"}\r\n                  longitude={item?.data?.location?.coordinates[0] || 105.123}\r\n                  latitude={item?.data?.location?.coordinates[1] || 21.437}\r\n                  onMouseEnter={(e) => {\r\n                    e.preventDefault();\r\n                    setPopUpIndex(true);\r\n                  }}\r\n                  onMouseLeave={(e) => {\r\n                    e.preventDefault();\r\n                    setPopUpIndex(false);\r\n                  }}\r\n                >\r\n                  <CircleIcon props={item?.data?.current?.pollution?.aqius || 100}>\r\n                    <p>{item?.data?.current?.pollution?.aqius || 100}</p>\r\n                  </CircleIcon>\r\n\r\n                </Marker>\r\n                {renderPopup(item)}\r\n              </div>\r\n            ))\r\n          }\r\n\r\n          <GeolocateControl\r\n            style={geolocateControlStyle}\r\n            positionOptions={{ enableHighAccuracy: true }}\r\n            trackUserLocation={true}\r\n            showUserLocation={true}\r\n            showUserHeading={true}\r\n            auto\r\n          />\r\n          <FullscreenControl style={fullscreenControlStyle} />\r\n        </ReactMapGL>\r\n        <br />\r\n        <NearestCityInfo />\r\n      </div>\r\n    </PageContainer>\r\n  )\r\n}\r\nconst WorldMap = () => (\r\n  <MapContextProvider>\r\n    <WorldMapImpl />\r\n  </MapContextProvider>\r\n);\r\n\r\nexport default memo(WorldMap)\r\n"]},"metadata":{},"sourceType":"module"}